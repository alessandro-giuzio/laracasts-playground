---
import Layout from '../layouts/Layout.astro';
---

<Layout lesson='js-animations'>
  <main>
    <div class='container'>
      <h1>JavaScript Animations</h1>
      <div class='square'></div>
      <div class='container-1'>
        <button>Play</button>
        <button>Pause</button>
      </div>
    </div>
  </main>
</Layout>

<style>
  .container {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2rem;
    margin-top: 2rem;
  }
  .container-1 {
    display: flex;
    gap: 1rem;
    margin-top: 50px;
  }
  .square {
    height: 100px;
    width: 100px;
    background-color: oklch(0.69 0.18 245.62);
    border-radius: 0.25rem;
  }
</style>

<script>
  const square = document.querySelector('.square') as HTMLDivElement;
  const playButton = document.querySelector(
    '.container-1 button:nth-of-type(1)'
  ) as HTMLButtonElement;
  const pauseButton = document.querySelector(
    '.container-1 button:nth-of-type(2)'
  ) as HTMLButtonElement;

  /* square.style.transform = 'rotate(45deg)';

  let rotation = 0;
  const MAX_ROTATION = 45;

  const intervalId = setInterval(() => {
    rotation++;
    square.style.transform = `rotate(${rotation}deg)`;

    if (rotation >= MAX_ROTATION) {
      clearInterval(intervalId);
    }
  }, 1000 / 60); */
  const keyframes = [
    { transform: 'translateX(0px)translateY(0px)', easing: 'ease-in-out' },
    {
      transform: 'translateX(100px) rotate(45deg)',
      offseat: 0.2,
      easing: 'ease-in-out',
    },
    {
      transform: 'translateX(100px)translateY(100px)',
      scale: 0.8,
      easing: 'ease-in-out',
    },
    {
      transform: 'translateX(0px) translateY(100px) rotate(90deg)',
      offseat: 0.8,
      easing: 'ease-in-out',
    },
    { transform: 'translateX(0px)translateY(0px)', easing: 'ease-in-out' },
  ];
  const options: KeyframeAnimationOptions = {
    duration: 2000,
    iterations: 3,
    easing: 'ease-in-out',
  };

  const animation: Animation = square.animate(keyframes, options);
  playButton.addEventListener('click', () => {
    animation.play();
  });
  pauseButton.addEventListener('click', () => {
    animation.pause();
  });
</script>
